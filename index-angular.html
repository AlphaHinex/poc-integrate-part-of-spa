<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <!-- build:css(.) styles/vendor.css -->
  <!-- bower:css -->
  <link rel="stylesheet" href="bower_components/angular-ui-grid/ui-grid.css" />
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
  <link rel="stylesheet" href="bower_components/angular-bootstrap-nav-tree/dist/abn_tree.css" />
  <!-- endbower -->
  <!-- endbuild -->
  <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild -->
</head>
<body>

  <div>
    <button onclick="renderSnippet('views/form-demo/input-demo.html');">Input Demo</button>
    <button onclick="renderSnippet('views/form-demo/tabs-demo.html');">Tabs Demo</button>
    <button onclick="renderSnippet('views/main.html')">Home</button>
  </div>

  <div id="angularBlock"></div>

  <script src="bower_components/jquery/dist/jquery.js"></script>
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-ui-grid/ui-grid.js"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
  <script src="bower_components/angular-resource/angular-resource.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="bower_components/angular-bootstrap-nav-tree/dist/abn_tree_directive.js"></script>

  <script src="scripts/app.js"></script>
  <script src="scripts/controllers/main.js"></script>
  <script src="scripts/controllers/demo.js"></script>
  <script src="scripts/directives/arescontainer.js"></script>
  <script src="scripts/directives/aresform.js"></script>
  <script src="scripts/directives/aresinput.js"></script>
  <script src="scripts/controllers/demotree.js"></script>
  <script src="scripts/controllers/form-demo/input-demo.js"></script>
  <script src="scripts/controllers/main/announcement/pic.js"></script>
  <script src="scripts/controllers/main/announcement/thumbnail.js"></script>
  <script src="scripts/controllers/main/announcement/search.js"></script>
  <script src="scripts/services/picplaceholderservice.js"></script>
  <script src="scripts/controllers/main/pubinfo/services.js"></script>
  <script src="scripts/controllers/main/pubinfo/rules.js"></script>
  <script src="scripts/controllers/main/pubinfo/subjects.js"></script>
  <script src="scripts/directives/aresdate.js"></script>
  <script src="scripts/controllers/form-demo/dt-demo.js"></script>
  <script src="scripts/services/form-demo/dt-demo.js"></script>
  <script src="scripts/services/form-demo/DynamicTree.js"></script>
  <script src="scripts/controllers/test.js"></script>

  <script>
    var ngAppName = 'aresApp';
    var urlPrefix = 'http://localhost:810/';

    function renderSnippet(url) {
      $('#angularBlock').empty();
      $('#angularBlock').append('<div id="innerBlock"></div>');
      $.get(urlPrefix + url)
        .done(function(data) {
          $('#innerBlock').append(data);
        })
        .done(function() {
          $.when(loadNgInclude())
          .done(function() {
            angular.bootstrap($('#innerBlock'), [ngAppName]);
          });
        });
    }

    function loadNgInclude() {
      var dtd = $.Deferred();
      var requests = Array();
      var includes = $('#innerBlock').find('[ng-include]');
      includes.each(function(index, el) {
        var url = $(el).attr('src') || $(el).attr('ng-include')
        url = url.replace(/[\'\"]/g, '');
        requests.push($.get(urlPrefix + url)
                        .done(function(data) {
                          $(el).append(data);
                          $(el).removeAttr('ng-include');
                          $(el).removeAttr('src');
                        }));
      });
      $.when.apply($, requests).done(function() {
        dtd.resolve();
      });
      return dtd.promise();
    }
  </script>
</body>
</html>